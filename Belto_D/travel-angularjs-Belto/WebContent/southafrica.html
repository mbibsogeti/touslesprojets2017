<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, minimal-scale=0.5">
<link rel="stylesheet" href="CSS/bootstrap.min.css">
<script src="js/angular.min.js"></script>
<!-- on rajoute deux balises script correspondant fichier JS -->
<script src="js/angular-route.min.js"></script>
<script src="js/angular-animate.min.js"></script>
<!-- Balise pour l'animation -->
<!-- Absolute, les images empilées(une au dessus de l'autre) -->
<style>
.view{
  position:absolute;
  width:80%; 
  transition:1s;
  background:#cfc;
  color:red;
  }
 .view.ng-enter{
 opacity:0;
 }
 .view.ng-enter-active{
 opacity:1;
 }
 .view.ng-leave{
 opacity:1;
 }
 .view.ng-leave-active{
 opacity:0;
 }
 
</style>
<!-- configuration du routeur et du controller -->
<script defer>
angular
.module("appSA",["ngRoute","ngAnimate"])
.constant("destina",[{name:"Le Cap", desc:"Ville du sud", id:1},{name:"Prétoria", desc:"Ville du sud", id:2},{name:"Johannesburg", desc:"Ville du nord", id:3},{name:"Knysna", desc:"Ville du sud", id:4}])
.config(function($routeProvider){
	$routeProvider
	<!--Première page Html-->
		.when("/index",{controller:"CtlSA",template:function(){
			return "<p><h1>Nous proposons...</h1><a href='#!/destination'><h2>Cliquez pour afficher les différentes destinations</h2></a></p>"
		}})
	<!--"/destination== <a href='#!/destination'"-->
	<!-- controllerAs c, veut dire que la page est gérer par le meme controlleur"-->
	<!--Seconde page Html-->
		.when("/destination",{controller:"CtlSA",templateUrl:"southafrica/dests.html",controllerAs:"c"	
		})
	<!--Troisieme page Html-->
    <!--Cette page est incluse dans destination et accessible par son id-->
		.when("/destination/:id",{controller:"CtlSA",templateUrl:"southafrica/detail.html",controllerAs:"c"	
		})
		.otherwise({redirectTo:"/index"})
})
<!--Le controlleur-->
<!--$routeParam et destina en paramètre du controlleur, in jecter dans le controlleur-->
<!--$routeParam= aller chercher-->
.controller("CtlSA",function($routeParams, destina){
	<!--appelle de la liste (clé= destina avec toutes les valeurs)-->
	this.dests=destina
<!--Le commentaire ci dessous est une liste de destination(autre façon de faire comme la ligne précédente)-->
<!--this.dests=[{name:"Le Cap", desc:"Ville du sud", id:1},{name:"Prétoria", desc:"Ville du sud", id:2},{name:"Johannesburg", desc:"Ville du nord", id:3},{name:"Knysna", desc:"Ville du sud", id:4}]this.dests=[{name:"Le Cap", desc:"Ville du sud", id:1},{name:"Prétoria", desc:"Ville du sud", id:2},{name:"Johannesburg", desc:"Ville du nord", id:3},{name:"Knysna", desc:"Ville du sud", id:4}]-->	
<!--pour afficher les infos sur une destination-->
<!--on affiche la bonne destination en fonction de la donnée rentrée-->
	for(i in this.dests){
		if(this.dests[i].id==$routeParams.id)
			this.destination=this.dests[i]
	}
	console.log(this.destination)
})

</script>
<title>Afrique du sud</title>
</head>
<body ng-app="appSA">
	<h1>Bienvenue en Afrique du sud</h1>
	 <nav>
		<ul class="nav nav-pills nav-tabs nav-justified">
			<li><a href="index.html">Accueil-Afrique</a></li>
			<li class="active"><a href="maroc.html"> Vers le Maroc?</a></li>
			<li><a href="senegal.html">Vers le sénégal?</a></li>
			<li class="active"><a href="egypte.html">Vers l'Ègypte?</a></li>
			<li><a href="tunisie.html">Vers la tunisie?</a></li>
			<li class="active"><a href="#"><span
					class="glyphicon glyphicon-asterisk"></span>Acceuil</a></li>
			<li><a href="ghana.html">Vers le Ghana?</a></li>
		</ul>
	</nav>
		<h2>Quel beau pays, afrique du sud</h2>

	<img class="col-sm-12 col-lg-6" alt="" src="img/africa.jpg">	
		
<!-- Le div reste vide, tout ce qu'on appelle se redirige vers le div -->
<!-- ng-view c'est pour le controller -->
<!-- On rajoute la class view pour debuter l'annimation -->		
<div class="container view" ng-controller="CtlSA as c"
		ng-view ></div>
	
</body>
</html>