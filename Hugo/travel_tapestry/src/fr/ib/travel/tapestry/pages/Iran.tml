<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
	xmlns:p="tapestry:parameter" t:type="layout" title="Viaje a Iran">

	<h1>Viaje en el tiempo a Iran</h1>

	<div class='row'>
		<section class='col-sm-6'>
			<h2>Iran en 1960</h2>
			<img src="${context:img/iran-family-1960s.jpg}" class="img-responsive"></img>
		</section>

		<section class='col-sm-6'>
			<h2>Destinos</h2>

			<p>${discount.name} por ${discount.price} €. Actualmente tenemos
				${travels.size()} viajes disponibles:</p>

			<!-- <p t:type="loop" source="travels" value="travel">${travel.name}</p> -->

			<ul>
				<li t:type="loop" source="travels" value="travel">${travel.name}</li>
				<!-- <li>${travels.get(0).name}</li> <li>${travels.get(1)}</li> <li>${travels.get(2)}</li> -->
			</ul>

			<!-- la valeur travel est une propriété qui est capable de lire et écrire 
				en boucle, qui est définie en annotation dans Iran.java. Sa définition en 
				annotations peut être aussi donnée avec des getters and setters -->
			<table class="table">
				<tr>
					<th>Indice</th>
					<th>Ciudad</th>
					<th>Precio (€)</th>
					<th>Precio (rials)</th>
					<th>Descripcion</th>
				</tr>

				<t:loop source="travels" value="travel" index="i">
					<tr>
						<td>${iplus1}</td>
						<td>${travel.name}</td>
						<td>
							${travel.price}
							<t:if test="cheap">!</t:if>
						</td>
						<td>${rialPrice}</td>
						<td>${travel.description}</td>
					</tr>
				</t:loop>

			</table>
		</section>
	</div>

	<div class='row'>
		<section class='col-sm-6'>
			<h2>Viajes economicos</h2>
			<div t:type="if" test="cheap">
				<ul>
					<t:loop source="travels" value="travel">
						<li t:type="if" test="cheap">${travel.name} por tan
							solo ${travel.price}
							€</li>
					</t:loop>
				</ul>
			</div>
			<!-- object="discount" appele la fonction getDiscount dans Iran.java -->
			<t:beandisplay object="discount" reorder="name,price,description">
				<p:description>${discount.description.substring(0,20)}
				</p:description>
				<p:name>${discount.name.toUpperCase()}</p:name>
			</t:beandisplay>
		</section>
	</div>
</html>