<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sunu Gaal !</title>
<script src="js/angular.min.js"></script>	
<script defer>
	// Si deux paramètres : créer un module; si un seul : désigne le module déjà créé
	var appSen = angular.module("appSenegal", []);
	// Syntaxe 1 : Utilisable si on est dans le même fichier
	appSen.constant("avion", 945);
	// 	Syntaxe 2 : Préférable si on a coupé le code dans plusieurs fichiers
	// 	angular.module("appSenegal").constant("avion", 945);
	
	// Il est possible de chaîner les éléments
	// value : Contrairement à constant, value peut être modifié. Les deux ne s'injectent pas au même endroit.
	appSen.constant("hotel", 38.29).value("taxe", 203);
	// Tout cela aurait pu être fait en une seule ligne à la déclaration :
	// var appSen = angular.module("appSenegal", []).constant("avion", 945).value("taxe", 203).controller(...);
	// Ces objets sont visibles dans _InvokeQueue dans la console JS après avoir tapé appSen dans la barre du bas
	// CONTROLEUR //
	appSen.controller("CtlSenegal", function($scope, hotel, avion) {
		$scope.price = 9 * hotel + avion;
	})
	// FILTRES : a pour but de faciliter le HTML. On peut faire des opérations entre les accolades //
	appSen.filter("multi", function() {
		return function(x, y, z) {
			return x * y * z;
		}
	})
	appSen.filter("curr", function() {
		return function(montant, nomMonnaie, taux) {
			var decimales = 2;
			if(taux == undefined)
				taux = 1
			// .toFixed(2) arrondit avec 2 chiffres décimaux
			return (montant / taux).toFixed(decimales) + " " + nomMonnaie;
		}
	})
</script>
</head>
<body>
	<h1>Sénégal, pays de la Téranga</h1>
	<!-- Appel du module et du contrôleur -->
	<div data-ng-app="appSenegal" data-ng-controller="CtlSenegal">
		<!-- Syntaxe pour formater avec 2 décimales -->
		<p>Notre voyage : {{price | number:2}} €</p>
		<!-- Le premier paramètre est à gauche du | y et z correspondent dans l'ordre à 3 et 6 -->
		<p>{{5 | multi:3:6}}</p>
		<p>Notre voyage : {{price | curr:"Euros"}} ({{price | curr:"CFA":0.0015}})</p>
	</div>
	<p>
		<a href="./index.html">Retour à l'index africain</a>
	</p>
</body>
</html>