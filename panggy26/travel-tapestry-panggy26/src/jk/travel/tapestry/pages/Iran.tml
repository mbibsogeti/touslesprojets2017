<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd" xmlns:p="tapestry:parameter" t:type="layout" title="Iran">
	<h1 class="h1">Iran, perle persique</h1>
	<img src="${context:img/iran.jpg}"></img>
	<!-- Affichage des attributs de Travel avec les getters -->
	<p>N'attendez pas : ${discount.name} pour seulement ${discount.price} €. C'est la ${discount.description} !</p>
	<!-- Affiche la valeur de toutes les propriétés disposant d'un get public dans la classe Travel -->
	<t:beandisplay object="discount" reorder="name, description, price">
		<!-- Remplace la description habituelle ... -->
		<p:description>
			<!-- ... par une sous-chaîne des 10 permiers caractères de description-->
			${discount.description.substring(0, 10)}
		</p:description>
		<!-- Remplace le nom habituelle ... -->
		<p:name>
			<!-- ... par un nom en majuscules -->
			${discount.name.toUpperCase()}
		</p:name>
	</t:beandisplay>
	<!-- Récupération de la taille de l'objet retourné par getTravels -->
	<p>Nous disposons actuellement de ${travels.size()} destinations pour l'Iran :</p>
	<table class="table">
		<tr>
			<th>N°</th>
			<th>Ville</th>
			<th>Prix en euros</th>
			<th>Prix en rials</th>
			<th>Description</th>
		</tr>
		<!-- Pour utiliser i et ind, il faut les déclarer avec @Property dans Iran -->
		<!-- Autre syntaxe : <p t:type="loop"></p> -->
		<!-- index= commence à compter à partir de  0. Voir appel à ${indPlusUn} -->
		<!-- empty= affiche un message si 0 tour de boucle -->	
		<t:loop source="travels" value="i" index="ind" empty="Aucun voyage en Iran">
		<!-- Si on met ${rialPrice} avant la boucle, erreur car pas encore instancié -->
		<!-- Si on met ${rialPrice} après la boucle, il vaut sa dernière valeur prise dans la boucle 3.285575E7 -->
			<tr>
				<td>${indPlusUn}</td>
				<td>${i.name}</td>
				<td>
					${i.price}
					<t:if test="${i.cheaperThan1000}">
						!
					</t:if>
				</td>
				<!-- rialPrice est une propriété d'Iran (et pas de i) -->
				<td>${rialPrice}</td>
				<td>${i.description}</td>
			</tr>
		</t:loop>
	</table>
	<p>Le prix correspondant en monnaie locale est de ${rialPrice} rials</p>
</html>		